import{r as i,j as e,C as d,S as b,B as s,T as t,F as y}from"./index-Ce8PP-0Z.js";import{A as z,f as C}from"./api-DXOYnFyU.js";import{B as h}from"./badge-CveKztw5.js";import{G as w}from"./grid-DetiGbYY.js";import{V as x}from"./v-stack-CQ6LIfdw.js";const E=()=>{const[f,j]=i.useState({}),[m,u]=i.useState(!0),[g,p]=i.useState(null);i.useEffect(()=>{(async()=>{try{const n=await C("/api/activeContentStats");j(n)}catch(n){console.error("Error fetching content stats:",n),p(n instanceof Error?n.message:"Failed to fetch content statistics")}finally{u(!1)}})()},[]);const S=a=>{const n=new Date,o=new Date(a),c=n-o,r=Math.floor(c/1e3),l=new Intl.RelativeTimeFormat("en",{numeric:"auto",style:"short"});return r<60?l.format(-r,"second"):r<3600?l.format(-Math.floor(r/60),"minute"):r<86400?l.format(-Math.floor(r/3600),"hour"):r<2592e3?l.format(-Math.floor(r/86400),"day"):r<31536e3?l.format(-Math.floor(r/2592e3),"month"):l.format(-Math.floor(r/31536e3),"year")};return m?e.jsx(d,{display:"flex",justifyContent:"center",mt:10,children:e.jsx(b,{size:"xl"})}):g?e.jsx(d,{mt:5,children:e.jsx(z,{status:"error",children:e.jsxs(s,{children:[e.jsx(t,{fontWeight:"bold",children:"Error"}),e.jsx(t,{children:g})]})})}):e.jsx(d,{maxWidth:"6xl",py:6,children:e.jsxs(x,{gap:6,align:"stretch",children:[e.jsxs(s,{children:[e.jsx(t,{fontSize:"2xl",fontWeight:"bold",mb:2,children:"Active Content Sources"}),e.jsx(t,{color:"gray.600",children:"Overview of content sources across all channels"})]}),Object.keys(f).length===0?e.jsx(s,{p:6,borderWidth:"1px",borderRadius:"md",bg:"white",textAlign:"center",children:e.jsx(t,{color:"gray.500",children:"No active content found."})}):e.jsx(x,{gap:6,align:"stretch",children:Object.entries(f).map(([a,n])=>e.jsx(s,{p:6,borderWidth:"1px",borderRadius:"lg",bg:"white",shadow:"sm",children:e.jsxs(x,{gap:4,align:"stretch",children:[e.jsx(s,{children:e.jsx(t,{fontSize:"xl",fontWeight:"bold",color:"blue.600",mb:2,children:a})}),n.map((o,c)=>e.jsx(s,{p:3,borderWidth:"1px",borderRadius:"md",borderColor:"gray.200",bg:"gray.50",children:e.jsxs(w,{templateColumns:"1fr 80px 1fr 80px 80px 100px",gap:4,alignItems:"center",children:[e.jsxs(s,{children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Project"}),e.jsx(t,{fontSize:"sm",fontWeight:"semibold",children:o.prj||"Default"})]}),e.jsxs(s,{children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Source"}),e.jsx(h,{colorPalette:"blue",size:"sm",children:o.sourceLang})]}),e.jsxs(s,{children:[e.jsxs(t,{fontSize:"xs",color:"gray.500",mb:1,children:["Targets (",o.targetLangs.length,")"]}),e.jsxs(y,{wrap:"wrap",gap:1,children:[o.targetLangs.slice(0,3).map(r=>e.jsx(h,{colorPalette:"green",size:"sm",children:r},r)),o.targetLangs.length>3&&e.jsxs(h,{colorPalette:"gray",size:"sm",children:["+",o.targetLangs.length-3]})]})]}),e.jsxs(s,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Resources"}),e.jsx(t,{fontSize:"sm",fontWeight:"bold",color:"orange.600",children:o.resCount.toLocaleString()})]}),e.jsxs(s,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Segments"}),e.jsx(t,{fontSize:"sm",fontWeight:"bold",color:"purple.600",children:o.segmentCount.toLocaleString()})]}),e.jsxs(s,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Modified"}),e.jsx(t,{fontSize:"xs",color:"gray.600",children:S(o.lastModified)})]})]})},c))]})},a))})]})})};export{E as default};
