import{j as e,B as r,T as t,F as u,S as g}from"./index-Dj9K5Hqe.js";import{A as j}from"./namespace-Cs4VYUoo.js";import{G as m}from"./grid-hb6yzIE3.js";import{V as f}from"./v-stack-D1TqR3V0.js";import{u as p}from"./useQuery-BnTX2Sbj.js";import{f as b}from"./api-CuNo3se4.js";import{B as h}from"./badge-BTOgvbEy.js";import{T as S,a as w,b as z,c as y,d as A}from"./tooltip-DDMwJzCk.js";import"./use-presence-context-TuOzZPRF.js";import"./index-Cs9ld2cj.js";const C=({item:o})=>{const x=s=>{const l=new Date,d=new Date(s),c=l-d,n=Math.floor(c/1e3),i=new Intl.RelativeTimeFormat("en",{numeric:"auto",style:"short"});return n<60?i.format(-n,"second"):n<3600?i.format(-Math.floor(n/60),"minute"):n<86400?i.format(-Math.floor(n/3600),"hour"):n<2592e3?i.format(-Math.floor(n/86400),"day"):n<31536e3?i.format(-Math.floor(n/2592e3),"month"):i.format(-Math.floor(n/31536e3),"year")},a=s=>new Date(s).toLocaleString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:"short"});return e.jsx(r,{p:3,borderWidth:"1px",borderRadius:"md",borderColor:"border.default",bg:"yellow.subtle",w:"100%",children:e.jsxs(m,{templateColumns:"2fr 80px 3fr 80px 80px 100px",gap:4,alignItems:"center",children:[e.jsxs(r,{children:[e.jsx(t,{fontSize:"xs",color:"fg.muted",mb:1,children:"Project"}),e.jsx(t,{fontSize:"sm",fontWeight:"semibold",children:o.prj||"Default"})]}),e.jsxs(r,{children:[e.jsx(t,{fontSize:"xs",color:"fg.muted",mb:1,children:"Source"}),e.jsx(h,{colorPalette:"blue",size:"sm",children:o.sourceLang})]}),e.jsxs(r,{children:[e.jsxs(t,{fontSize:"xs",color:"fg.muted",mb:1,children:["Targets (",o.targetLangs.length,")"]}),e.jsx(u,{wrap:"wrap",gap:1,children:o.targetLangs.map(s=>e.jsx(h,{colorPalette:"green",size:"sm",children:s},s))})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"fg.muted",mb:1,children:"Resources"}),e.jsx(t,{fontSize:"sm",fontWeight:"bold",color:"orange.600",children:o.resCount.toLocaleString()})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"fg.muted",mb:1,children:"Segments"}),e.jsx(t,{fontSize:"sm",fontWeight:"bold",color:"purple.600",children:o.segmentCount.toLocaleString()})]}),e.jsxs(r,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"fg.muted",mb:1,children:"Modified"}),e.jsxs(S,{children:[e.jsx(w,{asChild:!0,children:e.jsx(t,{fontSize:"xs",color:"fg.muted",cursor:"help",children:x(o.lastModified)})}),e.jsx(z,{children:e.jsxs(y,{children:[e.jsx(A,{}),e.jsx(t,{fontSize:"sm",children:a(o.lastModified)})]})})]})]})]})})},P=()=>{const{data:o={},isLoading:x,error:a}=p({queryKey:["activeContentStats"],queryFn:()=>b("/api/activeContentStats")});return x?e.jsx(r,{display:"flex",justifyContent:"center",mt:10,children:e.jsx(g,{size:"xl"})}):a?e.jsx(r,{mt:5,px:6,children:e.jsx(j,{status:"error",children:e.jsxs(r,{children:[e.jsx(t,{fontWeight:"bold",children:"Error"}),e.jsx(t,{children:a})]})})}):e.jsx(r,{py:6,px:6,children:e.jsxs(f,{gap:6,align:"stretch",children:[e.jsxs(r,{textAlign:"center",children:[e.jsx(t,{fontSize:"2xl",fontWeight:"bold",mb:2,children:"Active Content Sources"}),e.jsx(t,{color:"fg.muted",children:"Overview of content sources across all channels"})]}),Object.keys(o).length===0?e.jsx(r,{p:6,borderWidth:"1px",borderRadius:"md",bg:"white",textAlign:"center",children:e.jsx(t,{color:"fg.muted",children:"No active content found."})}):e.jsx(f,{gap:6,align:"center",children:Object.entries(o).map(([s,l])=>e.jsx(r,{p:6,borderWidth:"1px",borderRadius:"lg",bg:"white",shadow:"sm",minW:"800px",maxW:"1200px",w:"100%",children:e.jsxs(f,{gap:4,align:"stretch",children:[e.jsx(r,{children:e.jsx(t,{fontSize:"xl",fontWeight:"bold",color:"blue.600",mb:2,children:s})}),l.length===0?e.jsx(r,{p:6,borderWidth:"1px",borderRadius:"md",bg:"bg.muted",textAlign:"center",w:"100%",children:e.jsx(t,{color:"fg.muted",fontSize:"sm",children:"No content found for this channel"})}):e.jsx(m,{templateColumns:"repeat(auto-fit, minmax(800px, 1200px))",gap:4,justifyItems:"center",children:l.sort((d,c)=>new Date(c.lastModified)-new Date(d.lastModified)).map((d,c)=>e.jsx(C,{item:d},c))})]})},s))})]})})};export{P as default};
