import{r as p,m as b,j as e,c as H,a as M,b as R,d as $,T as d,B as n,F as f,u as Q,S as E,L as U}from"./index-CE6JgXwC.js";import{A as D}from"./namespace-DqVzlNZ0.js";import{G}from"./grid-c9ySqPWI.js";import{L as K}from"./link-BJrTt4Ej.js";import{c as k,f as _}from"./api-CQ_emPlI.js";import{c as J,a as j,u as V,b as X,d as Y,n as Z,e as q}from"./index-BHll-Wur.js";import{u as T}from"./use-field-context-DPgnX2eS.js";import{u as ee}from"./useQuery-DJATtsyt.js";import{B as y}from"./badge-D0XxOmqE.js";import{T as te,a as se,b as re,c as oe,d as ie}from"./tooltip-DsbPmc5I.js";import"./use-presence-context-w7qGDwCc.js";const[z,w]=J({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),W=p.forwardRef((a,l)=>{const s=w(),t=b(s.getControlProps(),a);return e.jsx(j.span,{...t,ref:l})});W.displayName="SwitchControl";const N=p.forwardRef((a,l)=>{const s=w(),t=b(s.getHiddenInputProps(),a),o=T();return e.jsx(j.input,{"aria-describedby":o?.ariaDescribedby,...t,ref:l})});N.displayName="SwitchHiddenInput";const I=p.forwardRef((a,l)=>{const s=w(),t=b(s.getLabelProps(),a);return e.jsx(j.span,{...t,ref:l})});I.displayName="SwitchLabel";const ne=a=>{const l=p.useId(),{getRootNode:s}=V(),{dir:t}=X(),o=T(),i={id:l,ids:{label:o?.ids.label,hiddenInput:o?.ids.control},dir:t,disabled:o?.disabled,readOnly:o?.readOnly,invalid:o?.invalid,required:o?.required,getRootNode:s,...a},r=Y(M,i);return H(r,Z)},A=p.forwardRef((a,l)=>{const[s,t]=q()(a,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),o=ne(s),i=b(o.getRootProps(),t);return e.jsx(z,{value:o,children:e.jsx(j.label,{...i,ref:l})})});A.displayName="SwitchRoot";const L=p.forwardRef((a,l)=>{const[{value:s},t]=q()(a,["value"]),o=b(s.getRootProps(),t);return e.jsx(z,{value:s,children:e.jsx(j.label,{...o,ref:l})})});L.displayName="SwitchRootProvider";const O=p.forwardRef((a,l)=>{const s=w(),t=b(s.getThumbProps(),a);return e.jsx(j.span,{...t,ref:l})});O.displayName="SwitchThumb";const{withProvider:le,withContext:C}=k({key:"card"}),ae=le("div","root"),de=C("div","body");C("div","header");C("div","footer");C("h3","title");C("p","description");const{withProvider:B,withContext:P,useStyles:ce}=k({key:"switch"});B(L,"root",{forwardAsChild:!0});const he=B(A,"root",{forwardAsChild:!0}),ue=P(I,"label",{forwardAsChild:!0}),F=P(O,"thumb",{forwardAsChild:!0}),pe=P(W,"control",{forwardAsChild:!0,defaultProps:{children:e.jsx(F,{})}});p.forwardRef(function(l,s){const t=w(),o=ce(),{fallback:i,children:r,unstyled:h,...c}=l;return e.jsx(R.span,{ref:s,"data-checked":$(t.checked),...c,css:[h?void 0:o.indicator,l.css],children:t.checked?r:i})});p.forwardRef(function(l,s){const t=w(),{fallback:o,children:i,...r}=l;return e.jsx(R.span,{ref:s,"data-checked":$(t.checked),...r,children:t.checked?i:o})});const xe=N,fe=({project:a})=>{const{projectName:l,pairSummary:s,pairSummaryByStatus:t,translationStatus:o}=a,i={translated:t.translated||0,"in flight":t["in flight"]||0,"low quality":t["low quality"]||0,untranslated:t.untranslated||0},r=Object.values(i).reduce((u,m)=>u+m,0),h=r>0?Math.round(i.translated/r*100):0,c=r>0?Math.round(i["in flight"]/r*100):0,g=r>0?Math.round(i["low quality"]/r*100):0,S=r>0?Math.round(i.untranslated/r*100):0;return e.jsx(ae,{variant:"outline",bg:"yellow.subtle",children:e.jsxs(de,{children:[e.jsx(d,{fontSize:"lg",fontWeight:"semibold",mb:2,children:l}),e.jsx(n,{mb:3,children:e.jsxs(f,{align:"center",gap:2,mb:1,children:[e.jsxs(te,{children:[e.jsx(se,{asChild:!0,children:e.jsxs(n,{flex:"1",bg:"bg.muted",rounded:"full",height:"10px",cursor:"help",position:"relative",overflow:"hidden",children:[e.jsx(n,{position:"absolute",top:"0",left:"0",height:"100%",width:`${h}%`,bg:"green.solid",transition:"width 0.3s ease"}),e.jsx(n,{position:"absolute",top:"0",left:`${h}%`,height:"100%",width:`${c}%`,bg:"blue.solid",transition:"width 0.3s ease"}),e.jsx(n,{position:"absolute",top:"0",left:`${h+c}%`,height:"100%",width:`${g}%`,bg:"yellow.solid",transition:"width 0.3s ease"}),e.jsx(n,{position:"absolute",top:"0",left:`${h+c+g}%`,height:"100%",width:`${S}%`,bg:"red.solid",transition:"width 0.3s ease"})]})}),e.jsx(re,{children:e.jsxs(oe,{maxW:"300px",bg:"bg.default",borderWidth:"1px",borderColor:"border.default",shadow:"lg",zIndex:1e3,children:[e.jsx(ie,{}),e.jsxs(n,{p:2,children:[e.jsx(d,{fontSize:"sm",fontWeight:"bold",mb:2,color:"fg.default",children:"Translation Status Details"}),o&&o.length>0?e.jsx(n,{children:o.map((u,m)=>{const x=u.q===null?"untranslated":u.q===0?"in flight":u.q>=u.minQ?"translated":"low quality",v=x==="translated"?"green.solid":x==="in flight"?"blue.solid":x==="low quality"?"yellow.solid":"red.solid";return e.jsxs(f,{align:"center",gap:2,mb:1,children:[e.jsx(n,{w:"8px",h:"8px",bg:v,borderRadius:"full"}),e.jsxs(d,{fontSize:"xs",color:"fg.default",children:["Q: ",u.q||"null"," | Segs: ",u.seg," | Words: ",u.words," | Chars: ",u.chars]})]},m)})}):e.jsxs(n,{children:[e.jsxs(f,{align:"center",gap:2,mb:1,children:[e.jsx(n,{w:"8px",h:"8px",bg:"green.solid",borderRadius:"full"}),e.jsxs(d,{fontSize:"xs",color:"fg.default",children:["Translated: ",i.translated]})]}),e.jsxs(f,{align:"center",gap:2,mb:1,children:[e.jsx(n,{w:"8px",h:"8px",bg:"blue.solid",borderRadius:"full"}),e.jsxs(d,{fontSize:"xs",color:"fg.default",children:["In Flight: ",i["in flight"]]})]}),e.jsxs(f,{align:"center",gap:2,mb:1,children:[e.jsx(n,{w:"8px",h:"8px",bg:"yellow.solid",borderRadius:"full"}),e.jsxs(d,{fontSize:"xs",color:"fg.default",children:["Low Quality: ",i["low quality"]]})]}),e.jsxs(f,{align:"center",gap:2,children:[e.jsx(n,{w:"8px",h:"8px",bg:"red.solid",borderRadius:"full"}),e.jsxs(d,{fontSize:"xs",color:"fg.default",children:["Untranslated: ",i.untranslated]})]})]})]})]})})]}),e.jsxs(d,{fontSize:"sm",color:"fg.muted",minW:"45px",children:[h,"%"]})]})}),e.jsxs(f,{gap:2,flexWrap:"wrap",align:"center",children:[e.jsxs(y,{variant:"subtle",colorPalette:"blue",children:["Segments: ",s.segs.toLocaleString()]}),e.jsxs(y,{variant:"subtle",colorPalette:"green",children:["Words: ",s.words.toLocaleString()]}),e.jsxs(y,{variant:"subtle",colorPalette:"purple",children:["Chars: ",s.chars.toLocaleString()]}),i.untranslated>0&&e.jsxs(y,{variant:"solid",colorPalette:"red",children:["Untranslated: ",i.untranslated.toLocaleString()]}),i["low quality"]>0&&e.jsxs(y,{variant:"solid",colorPalette:"orange",children:["Low Quality: ",i["low quality"].toLocaleString()]})]})]})})},$e=()=>{Q();const[a,l]=p.useState(!1),{data:s={},isLoading:t,error:o}=ee({queryKey:["status"],queryFn:()=>_("/api/status")});if(t)return e.jsx(n,{display:"flex",justifyContent:"center",mt:5,children:e.jsx(E,{size:"xl"})});if(o)return e.jsx(n,{mt:5,px:6,children:e.jsx(D,{status:"error",children:e.jsxs(n,{children:[e.jsx(d,{fontWeight:"bold",children:"Error"}),e.jsx(d,{children:o})]})})});const i=r=>{const h=Object.values(r).reduce((c,g)=>c+g,0);return h===0?100:Math.round((r.translated||0)/h*100)};return e.jsxs(n,{py:6,px:6,children:[e.jsx(f,{align:"center",gap:3,mb:6,children:e.jsxs(he,{checked:a,onCheckedChange:r=>l(r.checked),children:[e.jsx(xe,{}),e.jsx(pe,{children:e.jsx(F,{})}),e.jsx(ue,{children:e.jsx(d,{fontSize:"md",fontWeight:"medium",children:"Hide complete"})})]})}),Object.entries(s).map(([r,h])=>Object.entries(h).map(([c,g])=>e.jsxs(n,{mb:6,p:4,borderWidth:"1px",borderRadius:"md",bg:"white",borderColor:"border.default",children:[e.jsx(n,{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap",mb:4,children:e.jsxs(K,{as:U,to:`/status/${r}/${c}`,fontSize:"xl",fontWeight:"semibold",color:"blue.600",_hover:{textDecoration:"underline"},children:[r," â†’ ",c]})}),Object.entries(g).map(([S,u])=>e.jsxs(n,{mb:4,children:[e.jsx(n,{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap",mb:3,children:e.jsxs(n,{children:[e.jsx(d,{fontSize:"sm",color:"fg.muted",mb:1,children:"Channel"}),e.jsx(d,{fontSize:"lg",fontWeight:"medium",color:"green.600",children:S})]})}),e.jsx(G,{templateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:4,children:Object.entries(u).filter(([m,x])=>a?i(x.pairSummaryByStatus)<100:!0).map(([m,x])=>e.jsx(fe,{project:{translationStatus:x.details||[],pairSummary:x.pairSummary,pairSummaryByStatus:x.pairSummaryByStatus,projectName:m}},`${r}-${c}-${S}-${m}`))})]},`${r}-${c}-${S}`))]},`${r}-${c}`))),Object.keys(s).length===0&&!t&&e.jsx(d,{mt:4,color:"fg.muted",children:"No active content found."})]})};export{$e as default};
