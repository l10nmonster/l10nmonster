import{A as b,u as S,r as y,j as e,B as a,S as $,T as n,z,F as d,V as v,a as m,c as x}from"./vendor-BVgSJH5C.js";import{a as L,L as w,f as C}from"./index-543A5WcJ.js";const B=()=>{const f=b(),{data:l,isLoading:h,error:c}=S({queryKey:["tmToc"],queryFn:()=>C("/api/tm/toc")}),g=(t,r)=>{f(`/tm/${t}/${r}`)},u=y.useMemo(()=>{if(!l)return[];const t=[];for(const[r,o]of Object.entries(l))for(const[s,i]of Object.entries(o))t.push({sourceLang:r,targetLang:s,stores:i||[]});return t.sort((r,o)=>{const s=`${r.sourceLang} → ${r.targetLang}`,i=`${o.sourceLang} → ${o.targetLang}`;return s.localeCompare(i)})},[l]),p=t=>t?new Date(t).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A",j=t=>t==null?"0":t.toLocaleString();return h?e.jsx(a,{display:"flex",justifyContent:"center",mt:10,children:e.jsx($,{size:"xl"})}):c?e.jsx(a,{mt:5,px:6,children:e.jsx(L,{error:c,fallbackMessage:"Failed to load TM data"})}):e.jsxs(a,{children:[e.jsx(w,{onSelect:g}),e.jsx(a,{py:6,px:6,children:u.length===0?e.jsx(a,{p:6,borderWidth:"1px",borderRadius:"md",bg:"white",textAlign:"center",children:e.jsx(n,{color:"fg.muted",children:"No translation memory data found."})}):e.jsx(z,{columns:{base:1,md:2,lg:3,xl:4},gap:4,children:u.map(({sourceLang:t,targetLang:r,stores:o})=>e.jsxs(d,{direction:"column",bg:"white",borderWidth:"1px",borderColor:"border.default",borderRadius:"lg",shadow:"sm",overflow:"hidden",h:"100%",children:[e.jsx(a,{bg:"blue.subtle",px:4,py:3,borderBottom:"1px",borderColor:"blue.muted",children:e.jsxs(n,{fontSize:"md",fontWeight:"semibold",color:"blue.700",children:[t," → ",r]})}),e.jsx(v,{align:"stretch",gap:2,p:4,flex:"1",children:o.length===0?e.jsx(n,{fontSize:"sm",color:"fg.muted",children:"No stores"}):o.map((s,i)=>e.jsxs(a,{children:[e.jsxs(d,{justify:"space-between",align:"baseline",children:[e.jsx(n,{fontSize:"sm",fontWeight:"medium",color:"fg.default",children:s.tmStore??"New/Unassigned"}),e.jsxs(n,{fontSize:"sm",color:"fg.muted",children:[j(s.jobCount)," jobs"]})]}),e.jsxs(n,{fontSize:"xs",color:"fg.muted",children:["Last job: ",p(s.lastUpdatedAt)]})]},i))}),e.jsxs(d,{px:4,py:3,borderTop:"1px",borderColor:"border.default",gap:2,justify:"flex-end",mt:"auto",children:[e.jsx(m,{as:x,to:`/tm/${t}/${r}`,size:"sm",colorPalette:"blue",variant:"outline",children:"Search"}),e.jsx(m,{as:x,to:`/tm/providers/${t}/${r}`,size:"sm",variant:"ghost",children:"Providers"})]})]},`${t}-${r}`))})})]})};export{B as default};
