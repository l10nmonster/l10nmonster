import{c as z,j as t,T as e,B as n,F as W,r as f,C as y,S as v}from"./index-Ce8PP-0Z.js";import{A as $,f as E}from"./api-DXOYnFyU.js";import{G as O}from"./grid-DetiGbYY.js";const{withProvider:R,withContext:d}=z({key:"card"}),D=R("div","root"),L=d("div","body");d("div","header");d("div","footer");d("h3","title");d("p","description");const T=({project:h})=>{const{sourceLang:m,targetLang:x,resCount:g,segmentCount:o,translationStatus:j}=h,s={untranslated:0,"in flight":0,translated:0,"low quality":0,words:0,chars:0};for(const{minQ:i,q:a,seg:l,words:p,chars:u}of j){const c=a===null?"untranslated":a===0?"in flight":a>=i?"translated":"low quality";s[c]+=l,s.words+=p,s.chars+=u}const r=Math.round(s.translated/o*100);return t.jsx(D,{variant:"outline",children:t.jsxs(L,{children:[t.jsxs(e,{fontSize:"lg",fontWeight:"semibold",mb:2,children:[m," â†’ ",x]}),t.jsx(n,{mb:3,children:t.jsxs(W,{align:"center",gap:2,mb:1,children:[t.jsx(n,{flex:"1",bg:"gray.200",rounded:"full",height:"6px",position:"relative",children:t.jsx(n,{bg:"blue.500",height:"100%",rounded:"full",width:`${r}%`,transition:"width 0.3s ease"})}),t.jsxs(e,{fontSize:"sm",color:"gray.600",minW:"45px",children:[r,"%"]})]})}),t.jsxs(e,{fontSize:"sm",children:["Resources: ",g.toLocaleString()]}),t.jsxs(e,{fontSize:"sm",children:["Segments: ",o.toLocaleString()]}),t.jsxs(e,{fontSize:"sm",children:["Words: ",s.words.toLocaleString()]}),s.untranslated>0&&t.jsxs(e,{fontSize:"sm",color:"orange.600",children:["Untranslated segments: ",s.untranslated.toLocaleString()]})]})})},P=()=>{const[h,m]=f.useState({}),[x,g]=f.useState(!0),[o,j]=f.useState(null);return f.useEffect(()=>{(async()=>{try{const r=await E("/api/status");m(r)}catch(r){console.error("Error fetching status:",r),j(r instanceof Error?r.message:"Failed to fetch status data")}finally{g(!1)}})()},[]),x?t.jsx(y,{display:"flex",justifyContent:"center",mt:5,children:t.jsx(v,{size:"xl"})}):o?t.jsx(y,{mt:5,children:t.jsx($,{status:"error",children:t.jsxs(n,{children:[t.jsx(e,{fontWeight:"bold",children:"Error"}),t.jsx(e,{children:o})]})})}):t.jsxs(y,{maxWidth:"6xl",py:6,children:[Object.entries(h).map(([s,r])=>Object.entries(r).map(([i,a])=>Object.entries(a).map(([l,p])=>t.jsxs(n,{mb:6,p:3,borderWidth:"1px",borderRadius:"md",bg:"white",borderColor:"gray.200",children:[t.jsxs(n,{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap",children:[t.jsxs(n,{children:[t.jsx(e,{fontSize:"sm",color:"gray.600",mb:1,children:"Channel"}),t.jsx(e,{fontSize:"xl",fontWeight:"semibold",color:"blue.600",children:s})]}),t.jsx(n,{height:"40px",width:"1px",bg:"gray.300"}),t.jsxs(n,{children:[t.jsx(e,{fontSize:"sm",color:"gray.600",mb:1,children:"Project"}),t.jsx(e,{fontSize:"xl",fontWeight:"semibold",color:"green.600",children:i})]})]}),t.jsx(O,{templateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:4,mt:4,children:Object.entries(p).map(([u,c])=>{const C=c.reduce((b,S)=>b+S.res,0),w=c.reduce((b,S)=>b+S.seg,0);return t.jsx(T,{project:{sourceLang:l,targetLang:u,resCount:C,segmentCount:w,translationStatus:c}},`${l}-${u}-${i}-${s}`)})})]},`${l}-${s}-${i}`)))),Object.keys(h).length===0&&!x&&t.jsx(e,{mt:4,color:"gray.600",children:"No active content found."})]})};export{P as default};
