import{r as h,m as g,j as e,c as M,a as Q,b as k,d as $,T as c,B as a,F as z,S as D}from"./index-Dj9K5Hqe.js";import{A as G}from"./namespace-Cs4VYUoo.js";import{G as K}from"./grid-hb6yzIE3.js";import{c as T,f as U}from"./api-CuNo3se4.js";import{c as J,a as w,u as V,b as X,d as Y,n as Z,e as q}from"./index-Cs9ld2cj.js";import{u as L}from"./use-field-context-CLSilCJa.js";import{u as _}from"./useQuery-BnTX2Sbj.js";const[W,j]=J({name:"SwitchContext",hookName:"useSwitchContext",providerName:"<SwitchProvider />"}),N=h.forwardRef((i,o)=>{const r=j(),t=g(r.getControlProps(),i);return e.jsx(w.span,{...t,ref:o})});N.displayName="SwitchControl";const O=h.forwardRef((i,o)=>{const r=j(),t=g(r.getHiddenInputProps(),i),s=L();return e.jsx(w.input,{"aria-describedby":s?.ariaDescribedby,...t,ref:o})});O.displayName="SwitchHiddenInput";const I=h.forwardRef((i,o)=>{const r=j(),t=g(r.getLabelProps(),i);return e.jsx(w.span,{...t,ref:o})});I.displayName="SwitchLabel";const ee=i=>{const o=h.useId(),{getRootNode:r}=V(),{dir:t}=X(),s=L(),d={id:o,ids:{label:s?.ids.label,hiddenInput:s?.ids.control},dir:t,disabled:s?.disabled,readOnly:s?.readOnly,invalid:s?.invalid,required:s?.required,getRootNode:r,...i},n=Y(Q,d);return M(n,Z)},A=h.forwardRef((i,o)=>{const[r,t]=q()(i,["checked","defaultChecked","disabled","form","id","ids","invalid","label","name","onCheckedChange","readOnly","required","value"]),s=ee(r),d=g(s.getRootProps(),t);return e.jsx(W,{value:s,children:e.jsx(w.label,{...d,ref:o})})});A.displayName="SwitchRoot";const H=h.forwardRef((i,o)=>{const[{value:r},t]=q()(i,["value"]),s=g(r.getRootProps(),t);return e.jsx(W,{value:r,children:e.jsx(w.label,{...s,ref:o})})});H.displayName="SwitchRootProvider";const E=h.forwardRef((i,o)=>{const r=j(),t=g(r.getThumbProps(),i);return e.jsx(w.span,{...t,ref:o})});E.displayName="SwitchThumb";const{withProvider:te,withContext:y}=T({key:"card"}),re=te("div","root"),se=y("div","body");y("div","header");y("div","footer");y("h3","title");y("p","description");const{withProvider:F,withContext:v,useStyles:oe}=T({key:"switch"});F(H,"root",{forwardAsChild:!0});const ne=F(A,"root",{forwardAsChild:!0}),ie=v(I,"label",{forwardAsChild:!0}),B=v(E,"thumb",{forwardAsChild:!0}),ce=v(N,"control",{forwardAsChild:!0,defaultProps:{children:e.jsx(B,{})}});h.forwardRef(function(o,r){const t=j(),s=oe(),{fallback:d,children:n,unstyled:m,...l}=o;return e.jsx(k.span,{ref:r,"data-checked":$(t.checked),...l,css:[m?void 0:s.indicator,o.css],children:t.checked?n:d})});h.forwardRef(function(o,r){const t=j(),{fallback:s,children:d,...n}=o;return e.jsx(k.span,{ref:r,"data-checked":$(t.checked),...n,children:t.checked?d:s})});const ae=O,de=({project:i})=>{const{sourceLang:o,targetLang:r,resCount:t,segmentCount:s,translationStatus:d}=i,n={untranslated:0,"in flight":0,translated:0,"low quality":0,words:0,chars:0};for(const{minQ:l,q:x,seg:u,words:b,chars:f}of d){const p=x===null?"untranslated":x===0?"in flight":x>=l?"translated":"low quality";n[p]+=u,n.words+=b,n.chars+=f}const m=Math.round(n.translated/s*100);return e.jsx(re,{variant:"outline",bg:"yellow.subtle",children:e.jsxs(se,{children:[e.jsxs(c,{fontSize:"lg",fontWeight:"semibold",mb:2,children:[o," â†’ ",r]}),e.jsx(a,{mb:3,children:e.jsxs(z,{align:"center",gap:2,mb:1,children:[e.jsx(a,{flex:"1",bg:"gray.muted",rounded:"full",height:"6px",position:"relative",children:e.jsx(a,{bg:"blue.600",height:"100%",rounded:"full",width:`${m}%`,transition:"width 0.3s ease"})}),e.jsxs(c,{fontSize:"sm",color:"fg.muted",minW:"45px",children:[m,"%"]})]})}),e.jsxs(c,{fontSize:"sm",children:["Resources: ",t.toLocaleString()]}),e.jsxs(c,{fontSize:"sm",children:["Segments: ",s.toLocaleString()]}),e.jsxs(c,{fontSize:"sm",children:["Words: ",n.words.toLocaleString()]}),n.untranslated>0&&e.jsxs(c,{fontSize:"sm",color:"orange.600",children:["Untranslated segments: ",n.untranslated.toLocaleString()]})]})})},ge=()=>{const[i,o]=h.useState(!1),{data:r={},isLoading:t,error:s}=_({queryKey:["status"],queryFn:()=>U("/api/status")});if(t)return e.jsx(a,{display:"flex",justifyContent:"center",mt:5,children:e.jsx(D,{size:"xl"})});if(s)return e.jsx(a,{mt:5,px:6,children:e.jsx(G,{status:"error",children:e.jsxs(a,{children:[e.jsx(c,{fontWeight:"bold",children:"Error"}),e.jsx(c,{children:s})]})})});const d=(n,m)=>{const l={translated:0};for(const{minQ:x,q:u,seg:b}of n)(u===null?"untranslated":u===0?"in flight":u>=x?"translated":"low quality")==="translated"&&(l.translated+=b);return Math.round(l.translated/m*100)};return e.jsxs(a,{py:6,px:6,children:[e.jsx(z,{align:"center",gap:3,mb:6,children:e.jsxs(ne,{checked:i,onCheckedChange:n=>o(n.checked),children:[e.jsx(ae,{}),e.jsx(ce,{children:e.jsx(B,{})}),e.jsx(ie,{children:e.jsx(c,{fontSize:"md",fontWeight:"medium",children:"Hide complete"})})]})}),Object.entries(r).map(([n,m])=>Object.entries(m).map(([l,x])=>Object.entries(x).map(([u,b])=>e.jsxs(a,{mb:6,p:3,borderWidth:"1px",borderRadius:"md",bg:"white",borderColor:"border.default",children:[e.jsxs(a,{display:"flex",alignItems:"center",gap:3,flexWrap:"wrap",children:[e.jsxs(a,{children:[e.jsx(c,{fontSize:"sm",color:"fg.muted",mb:1,children:"Channel"}),e.jsx(c,{fontSize:"xl",fontWeight:"semibold",color:"blue.600",children:n})]}),e.jsx(a,{height:"40px",width:"1px",bg:"border.default"}),e.jsxs(a,{children:[e.jsx(c,{fontSize:"sm",color:"fg.muted",mb:1,children:"Project"}),e.jsx(c,{fontSize:"xl",fontWeight:"semibold",color:"green.600",children:l})]})]}),e.jsx(K,{templateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:4,mt:4,children:Object.entries(b).filter(([f,p])=>{if(!i)return!0;const P=p.reduce((S,C)=>S+C.seg,0);return d(p,P)<100}).map(([f,p])=>{const P=p.reduce((S,C)=>S+C.res,0),R=p.reduce((S,C)=>S+C.seg,0);return e.jsx(de,{project:{sourceLang:u,targetLang:f,resCount:P,segmentCount:R,translationStatus:p}},`${u}-${f}-${l}-${n}`)})})]},`${u}-${n}-${l}`)))),Object.keys(r).length===0&&!t&&e.jsx(c,{mt:4,color:"fg.muted",children:"No active content found."})]})};export{ge as default};
