import{r as a,j as e,C as d,S as y,B as s,T as t,F as z}from"./index-D9bgjkyP.js";import{A as C,f as w}from"./api-XiGcpAVt.js";import{B as h}from"./badge-Bd5LzO8s.js";import{G as g}from"./grid-F6giFO6R.js";import{V as m}from"./v-stack-Bm-XzJuT.js";const E=()=>{const[x,j]=a.useState({}),[u,p]=a.useState(!0),[f,S]=a.useState(null);a.useEffect(()=>{(async()=>{try{const o=await w("/api/activeContentStats");j(o)}catch(o){console.error("Error fetching content stats:",o),S(o instanceof Error?o.message:"Failed to fetch content statistics")}finally{p(!1)}})()},[]);const b=i=>{const o=new Date,n=new Date(i),c=o-n,r=Math.floor(c/1e3),l=new Intl.RelativeTimeFormat("en",{numeric:"auto",style:"short"});return r<60?l.format(-r,"second"):r<3600?l.format(-Math.floor(r/60),"minute"):r<86400?l.format(-Math.floor(r/3600),"hour"):r<2592e3?l.format(-Math.floor(r/86400),"day"):r<31536e3?l.format(-Math.floor(r/2592e3),"month"):l.format(-Math.floor(r/31536e3),"year")};return u?e.jsx(d,{display:"flex",justifyContent:"center",mt:10,children:e.jsx(y,{size:"xl"})}):f?e.jsx(d,{mt:5,children:e.jsx(C,{status:"error",children:e.jsxs(s,{children:[e.jsx(t,{fontWeight:"bold",children:"Error"}),e.jsx(t,{children:f})]})})}):e.jsx(d,{maxWidth:"6xl",py:6,children:e.jsxs(m,{gap:6,align:"stretch",children:[e.jsxs(s,{children:[e.jsx(t,{fontSize:"2xl",fontWeight:"bold",mb:2,children:"Active Content Sources"}),e.jsx(t,{color:"gray.600",children:"Overview of content sources across all channels"})]}),Object.keys(x).length===0?e.jsx(s,{p:6,borderWidth:"1px",borderRadius:"md",bg:"white",textAlign:"center",children:e.jsx(t,{color:"gray.500",children:"No active content found."})}):e.jsx(g,{templateColumns:"repeat(auto-fit, minmax(400px, 1fr))",gap:6,children:Object.entries(x).map(([i,o])=>e.jsx(s,{p:6,borderWidth:"1px",borderRadius:"lg",bg:"white",shadow:"sm",children:e.jsxs(m,{gap:4,align:"stretch",children:[e.jsxs(s,{children:[e.jsx(t,{fontSize:"xl",fontWeight:"bold",color:"blue.600",mb:2,children:i}),e.jsxs(t,{fontSize:"sm",color:"gray.500",children:[o.length," content source",o.length!==1?"s":""]})]}),o.map((n,c)=>e.jsx(s,{p:3,borderWidth:"1px",borderRadius:"md",borderColor:"gray.200",bg:"gray.50",children:e.jsxs(g,{templateColumns:"1fr 80px 1fr 80px 80px 100px",gap:4,alignItems:"center",children:[e.jsxs(s,{children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Project"}),e.jsx(t,{fontSize:"sm",fontWeight:"semibold",children:n.prj||"Default"})]}),e.jsxs(s,{children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Source"}),e.jsx(h,{colorPalette:"blue",size:"sm",children:n.sourceLang})]}),e.jsxs(s,{children:[e.jsxs(t,{fontSize:"xs",color:"gray.500",mb:1,children:["Targets (",n.targetLangs.length,")"]}),e.jsxs(z,{wrap:"wrap",gap:1,children:[n.targetLangs.slice(0,3).map(r=>e.jsx(h,{colorPalette:"green",size:"sm",children:r},r)),n.targetLangs.length>3&&e.jsxs(h,{colorPalette:"gray",size:"sm",children:["+",n.targetLangs.length-3]})]})]}),e.jsxs(s,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Resources"}),e.jsx(t,{fontSize:"sm",fontWeight:"bold",color:"orange.600",children:n.resCount.toLocaleString()})]}),e.jsxs(s,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Segments"}),e.jsx(t,{fontSize:"sm",fontWeight:"bold",color:"purple.600",children:n.segmentCount.toLocaleString()})]}),e.jsxs(s,{textAlign:"center",children:[e.jsx(t,{fontSize:"xs",color:"gray.500",mb:1,children:"Modified"}),e.jsx(t,{fontSize:"xs",color:"gray.600",children:b(n.lastModified)})]})]})},c))]})},i))})]})})};export{E as default};
