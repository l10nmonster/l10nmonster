import{u as f,j as e,B as t,L as j,T as s,r as g,S as b}from"./index-CE6JgXwC.js";import{A as p}from"./namespace-DqVzlNZ0.js";import{G as u}from"./grid-c9ySqPWI.js";import{S,a as w,b as y,c as z,d as W,e as C,f as A,g as $}from"./select-B7OxVhQ5.js";import{V as h}from"./v-stack-BLV93Nj6.js";import{u as v}from"./useQuery-DJATtsyt.js";import{f as I}from"./api-CQ_emPlI.js";import{L as P}from"./link-BJrTt4Ej.js";import{B as T}from"./badge-D0XxOmqE.js";import"./index-BHll-Wur.js";import"./use-presence-context-w7qGDwCc.js";import"./use-field-context-DPgnX2eS.js";const k=({sourceLang:d,targetLang:l,providers:x})=>{f();const c=o=>{switch(o){case"done":return"green";case"pending":return"yellow";case"error":return"red";default:return"gray"}};return e.jsx(t,{p:6,borderWidth:"1px",borderRadius:"lg",bg:"white",shadow:"sm",w:"100%",children:e.jsxs(h,{gap:4,align:"stretch",children:[e.jsx(t,{children:e.jsx(t,{mb:2,children:e.jsxs(P,{as:j,to:`/tm/${d}/${l}`,fontSize:"xl",fontWeight:"semibold",color:"blue.600",_hover:{textDecoration:"underline"},children:[d," → ",l]})})}),e.jsx(h,{gap:3,align:"stretch",children:x.map((o,m)=>e.jsx(t,{p:3,borderWidth:"1px",borderRadius:"md",borderColor:"border.default",bg:"yellow.subtle",children:e.jsxs(u,{templateColumns:{base:"minmax(0, 2fr) 1fr 1fr 1fr 1fr",md:"minmax(0, 3fr) 1fr 1fr 1fr 1fr"},gap:{base:1,md:2},alignItems:"center",overflow:"hidden",minWidth:"0",children:[e.jsxs(t,{minWidth:"0",overflow:"hidden",children:[e.jsx(s,{fontSize:"xs",color:"fg.muted",mb:1,children:"Provider"}),e.jsx(s,{fontSize:"sm",fontWeight:"semibold",noOfLines:1,title:o.translationProvider,children:o.translationProvider})]}),e.jsxs(t,{textAlign:"center",children:[e.jsx(s,{fontSize:"xs",color:"fg.muted",mb:1,children:"Status"}),e.jsx(T,{colorPalette:c(o.status),size:"sm",children:o.status})]}),e.jsxs(t,{textAlign:"center",children:[e.jsx(s,{fontSize:"xs",color:"fg.muted",mb:1,children:"TUs"}),e.jsx(s,{fontSize:"sm",fontWeight:"bold",color:"purple.600",children:o.tuCount.toLocaleString()})]}),e.jsxs(t,{textAlign:"center",children:[e.jsx(s,{fontSize:"xs",color:"fg.muted",mb:1,children:"Unique"}),e.jsx(s,{fontSize:"sm",fontWeight:"bold",color:"orange.600",children:o.distinctGuids.toLocaleString()})]}),e.jsxs(t,{textAlign:"center",children:[e.jsx(s,{fontSize:"xs",color:"fg.muted",mb:1,children:"Jobs"}),e.jsx(s,{fontSize:"sm",fontWeight:"bold",color:"teal.600",children:o.jobCount.toLocaleString()})]})]})},m))})]})})},H=()=>{const d=f(),{data:l={},isLoading:x,error:c}=v({queryKey:["tmStats"],queryFn:()=>I("/api/tm/stats")}),o=g.useMemo(()=>{const r=[];return Object.entries(l).forEach(([i,n])=>{Object.keys(n).forEach(a=>{r.push({value:`${i}|${a}`,label:`${i} → ${a}`,sourceLang:i,targetLang:a})})}),r.sort((i,n)=>i.label.localeCompare(n.label))},[l]),m=r=>{if(r){const[i,n]=r.split("|");d(`/tm/${i}/${n}`)}};return x?e.jsx(t,{display:"flex",justifyContent:"center",mt:10,children:e.jsx(b,{size:"xl"})}):c?e.jsx(t,{mt:5,px:6,children:e.jsx(p,{status:"error",children:e.jsxs(t,{children:[e.jsx(s,{fontWeight:"bold",children:"Error"}),e.jsx(s,{children:c})]})})}):e.jsx(t,{py:6,px:6,children:e.jsxs(h,{gap:6,align:"stretch",children:[o.length>0&&e.jsx(t,{width:"300px",mx:"auto",children:e.jsxs(S,{positioning:{strategy:"absolute",placement:"bottom-start",flip:!0,gutter:4,offset:{mainAxis:0,crossAxis:0}},children:[e.jsxs(w,{children:[e.jsx(s,{fontSize:"sm",flex:"1",textAlign:"left",color:"fg.muted",children:"Select language pair..."}),e.jsx(y,{})]}),e.jsx(z,{children:e.jsx(W,{zIndex:1e3,bg:"white",borderWidth:"1px",borderColor:"border.default",borderRadius:"md",shadow:"lg",maxH:"200px",overflow:"auto",minWidth:"300px",width:"300px",children:o.map(r=>e.jsxs(C,{item:r.value,value:r.value,onClick:()=>m(r.value),children:[e.jsx(A,{children:r.label}),e.jsx($,{})]},r.value))})})]})}),Object.keys(l).length===0?e.jsx(t,{p:6,borderWidth:"1px",borderRadius:"md",bg:"white",textAlign:"center",children:e.jsx(s,{color:"fg.muted",children:"No translation memory data found."})}):e.jsx(u,{templateColumns:{base:"1fr",lg:"repeat(auto-fit, minmax(600px, 1fr))"},gap:6,maxW:"none",w:"100%",children:Object.entries(l).flatMap(([r,i])=>Object.entries(i).map(([n,a])=>e.jsx(k,{sourceLang:r,targetLang:n,providers:a},`${r}-${n}`)))})]})})};export{H as default};
