import{r as o,j as e,B as c,T as a,V as h,F as C,v as b}from"./vendor-BVSmEsOp.js";import{g as S}from"./index-Dl1WS_Lc.js";const T=()=>{const[i,p]=o.useState({}),[x,l]=o.useState(!0),d=()=>{try{const t=sessionStorage.getItem("tmCart");return t?JSON.parse(t):{}}catch(t){return console.error("Error loading cart:",t),{}}},u=t=>{sessionStorage.setItem("tmCart",JSON.stringify(t)),window.dispatchEvent(new Event("cartUpdated"))},n=()=>{l(!0);const t=d();p(t),l(!1)},f=(t,r)=>{const s=d();s[t]&&(Array.isArray(s[t])?(s[t].splice(r,1),s[t].length===0&&delete s[t]):(s[t].tus.splice(r,1),s[t].tus.length===0&&delete s[t]),u(s),n())},j=()=>{u({}),n()},m=()=>Object.values(i).reduce((t,r)=>Array.isArray(r)?t+r.length:t+(r.tus?r.tus.length:0),0);if(o.useEffect(()=>{n()},[]),x)return e.jsx(c,{py:6,px:6,children:e.jsx(a,{children:"Loading cart..."})});const g=m();return e.jsx(c,{py:6,px:6,children:e.jsxs(h,{gap:6,align:"stretch",children:[e.jsxs(C,{align:"center",justify:"space-between",children:[e.jsx(a,{fontSize:"2xl",fontWeight:"bold",children:"Translation Memory Cart"}),g>0&&e.jsx(b,{colorPalette:"red",variant:"outline",onClick:j,children:"Empty Cart"})]}),g===0?e.jsxs(c,{p:8,textAlign:"center",borderWidth:"1px",borderRadius:"lg",bg:"bg.muted",children:[e.jsx(a,{fontSize:"lg",color:"fg.default",mb:2,children:"Your cart is empty"}),e.jsx(a,{color:"fg.muted",children:"Add translation units from the TM pages to get started"})]}):e.jsx(h,{gap:6,align:"stretch",children:Object.entries(i).map(([t,r])=>e.jsx(S,{langPairKey:t,tus:r,onRemoveTU:f},t))})]})})};export{T as default};
